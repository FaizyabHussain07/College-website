<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admission Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            margin-top: 20px;
            background-color: #f3f4f6;
        }

        .nav-menu a:hover {
            color: #035225;
            padding-top: 14px;
            border-top: 1px solid #0a9111;
        }

        .container {
            width: 100%;
            max-width: 800px;
            border: 1px solid #ccc;
            padding: 20px;
            background-color: #f9f9f9;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        h2 {
            text-align: center;
            color: #333;
        }

        .section {
            background-color: #d1e7dd;
            padding: 10px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .form-group {
            flex: 1 1 calc(50% - 10px);
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .footer-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .go-back {
            text-decoration: none;
            color: #198754;
            font-weight: bold;
        }

        .go-back:hover {
            text-decoration: underline;
        }

        #submit-btn {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            background-color: #198754;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #submit-btn-1{
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            background-color: #198754;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #submit-btn-1:hover {
            background-color: #157347;
        }

        #submit-btn:hover {
            background-color: #157347;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .form-group {
                flex: 1 1 100%;
            }

            .footer-buttons {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
        }

        @media print {

            .section,
            .form-row {
                page-break-inside: avoid;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <h2>Admission Form</h2>

        <!-- Personal Information Section -->
        <div class="section">Personal Information</div>
        <div class="form-row">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" id="name" placeholder="Enter Name">
            </div>
            <div class="form-group">
                <label for="father-name">Father Name</label>
                <input type="text" id="father-name" placeholder="Enter Father's Name">
            </div>
            <div class="form-group">
                <label for="gender">Gender</label>
                <input type="text" id="gender" placeholder="Enter Gender">
            </div>
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" placeholder="Enter Email Address">
            </div>
            <div class="form-group">
                <label for="cnic">CNIC / B-Form No</label>
                <input type="text" id="cnic" placeholder="Enter CNIC / B-Form No">
            </div>
            <div class="form-group">
                <label for="mobile-no">Mobile No</label>
                <input type="text" id="mobile-no" placeholder="Enter Mobile No">
            </div>
            <div class="form-group">
                <label for="dob">Date of Birth</label>
                <input type="date" id="dob">
            </div>
            <div class="form-group">
                <label for="birth-place">Place of Birth</label>
                <input type="text" id="birth-place" placeholder="Enter Place of Birth">
            </div>
            <div class="form-group">
                <label for="nationality">Nationality</label>
                <input type="text" id="nationality" placeholder="Enter Nationality">
            </div>
            <div class="form-group">
                <label for="religion">Religion</label>
                <input type="text" id="religion" placeholder="Enter Religion">
            </div>
            <div class="form-group">
                <label for="domicile">Domicile District</label>
                <input type="text" id="domicile" placeholder="Enter Domicile District">
            </div>
            <div class="form-group">
                <label for="father-domicile">Father's Domicile District</label>
                <input type="text" id="father-domicile" placeholder="Enter Father's Domicile District">
            </div>
            <div class="form-group">
                <label for="occupation">Father's Occupation</label>
                <input type="text" id="occupation" placeholder="Enter Father's Occupation">
            </div>
            <div class="form-group">
                <label for="father-mobile">Father's Mobile No</label>
                <input type="text" id="father-mobile" placeholder="Enter Father's Mobile No">
            </div>
            <div class="form-group">
                <label for="father-cnic">Father's CNIC</label>
                <input type="text" id="father-cnic" placeholder="Enter Father's CNIC">
            </div>
            <div class="form-group">
                <label for="mother-cnic">Mother's CNIC</label>
                <input type="text" id="mother-cnic" placeholder="Enter Mother's CNIC">
            </div>
            <div class="form-group" style="flex: 1 1 100%;">
                <label for="address">Home Address</label>
                <input type="text" id="address" placeholder="Enter Home Address">
            </div>
        </div>

        <!-- Educational Information Section -->
        <div class="section">Educational Information</div>
        <div class="form-row">
            <div class="form-group">
                <label for="ninth-roll">Ninth Roll No</label>
                <input type="text" id="ninth-roll" placeholder="Enter Ninth Roll No">
            </div>
            <div class="form-group">
                <label for="ninth-year">Ninth Passing Year</label>
                <input type="text" id="ninth-year" placeholder="Enter Ninth Passing Year">
            </div>
            <div class="form-group">
                <label for="matric-roll">Matric Roll No</label>
                <input type="text" id="matric-roll" placeholder="Enter Matric Roll No">
            </div>
            <div class="form-group">
                <label for="matric-year">Matric Passing Year</label>
                <input type="text" id="matric-year" placeholder="Enter Matric Passing Year">
            </div>
            <div class="form-group">
                <label for="province">Province</label>
                <input type="text" id="province" placeholder="Enter Province">
            </div>
            <div class="form-group">
                <label for="board">Board</label>
                <input type="text" id="board" placeholder="Enter Board">
            </div>
            <div class="form-group">
                <label for="study-group">Study Group</label>
                <input type="text" id="study-group" placeholder="Enter Study Group">
            </div>
            <div class="form-group">
                <label for="subject">Subject</label>
                <input type="text" id="subject" placeholder="Enter Subject">
            </div>
            <div class="form-group">
                <label for="total-marks">Total Marks (550)</label>
                <input type="text" id="total-marks" placeholder="550" value="550" readonly>
            </div>
            <div class="form-group">
                <label for="obtained-marks">Obtained Marks</label>
                <input type="text" id="obtained-marks" placeholder="Enter Obtained Marks">
            </div>
            <div class="form-group">
                <label for="scaled-total">Scaled Total Marks (850)</label>
                <input type="text" id="scaled-total" placeholder="850" value="850" readonly>
            </div>
            <div class="form-group">
                <label for="scaled-obtained">Scaled Obtained Marks</label>
                <input type="text" id="scaled-obtained" placeholder="Enter Scaled Obtained Marks">
            </div>
            <div class="form-group">
                <label for="class8-passing">Class 8 Passing Year</label>
                <input type="text" id="class8-passing" placeholder="Enter Class 8 Passing Year">
            </div>
            <div class="form-group">
                <label for="class8-school">Class 8, School Name</label>
                <input type="text" id="class8-school" placeholder="Enter School Name">
            </div>
            <div class="form-group">
                <label for="class5-passing">Class 5 Passing Year</label>
                <input type="text" id="class5-passing" placeholder="Enter Class 5 Passing Year">
            </div>
            <div class="form-group">
                <label for="class5-school">Class 5, School Name</label>
                <input type="text" id="class5-school" placeholder="Enter School Name">
            </div>
        </div>

        <!-- Footer Buttons -->
        <div class="footer-buttons">
            <a href="../Admission open/Portal-Admis.html" target="_blank" class="go-back">Go Back</a>
            <button id="submit-btn-1" onclick="saveAsPDF()">Save as PDF</button>
            <button id="submit-btn" onclick="Submit_Form()">Submit</button>
        </div>
    </div>
    </body>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDwT1BAch2xuasICH8xbFhfNWkvLKQFYJQ",
            authDomain: "sgdc-admis-form-stu.firebaseapp.com",
            projectId: "sgdc-admis-form-stu",
            storageBucket: "sgdc-admis-form-stu.firebasestorage.app",
            messagingSenderId: "515592808863",
            appId: "1:515592808863:web:56eb7fb735a1894949b5aa"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('submit-btn').onclick = Submit_Form;


        function Submit_Form() {

            const name = document.getElementById("name").value;
            const fatherName = document.getElementById("father-name").value;
            const gender = document.getElementById("gender").value;
            const email = document.getElementById("email").value;
            const cnic = document.getElementById("cnic").value;
            const mobileNo = document.getElementById("mobile-no").value;
            const dob = document.getElementById("dob").value;
            const birthPlace = document.getElementById("birth-place").value;
            const nationality = document.getElementById("nationality").value;
            const religion = document.getElementById("religion").value;
            const domicile = document.getElementById("domicile").value;
            const fatherDomicile = document.getElementById("father-domicile").value;
            const occupation = document.getElementById("occupation").value;
            const fatherMobile = document.getElementById("father-mobile").value;
            const fatherCnic = document.getElementById("father-cnic").value;
            const motherCnic = document.getElementById("mother-cnic").value;
            const address = document.getElementById("address").value;

            const ninthRoll = document.getElementById("ninth-roll").value;
            const ninthYear = document.getElementById("ninth-year").value;
            const matricRoll = document.getElementById("matric-roll").value;
            const matricYear = document.getElementById("matric-year").value;
            const province = document.getElementById("province").value;
            const board = document.getElementById("board").value;
            const studyGroup = document.getElementById("study-group").value;
            const subject = document.getElementById("subject").value;
            const totalMarks = document.getElementById("total-marks").value;
            const obtainedMarks = document.getElementById("obtained-marks").value;
            const scaledTotal = document.getElementById("scaled-total").value;
            const scaledObtained = document.getElementById("scaled-obtained").value;
            const class8Passing = document.getElementById("class8-passing").value;
            const class8School = document.getElementById("class8-school").value;
            const class5Passing = document.getElementById("class5-passing").value;
            const class5School = document.getElementById("class5-school").value;

            // Ensure no required fields are empty
            if (!name || !fatherName || !email || !mobileNo) {
                alert('Please fill all required fields.');
                return;
            }

            // Generate a unique ID for each student (for example, using the student's name or a generated ID)
            const studentId = name + "-" + new Date().getTime(); // A unique ID based on name and timestamp

            // Save data to Firebase Realtime Database
            set(ref(db, 'students/' + studentId), {
                personalInformation: {
                    name: name,
                    fatherName: fatherName,
                    gender: gender,
                    email: email,
                    cnic: cnic,
                    mobileNo: mobileNo,
                    dob: dob,
                    birthPlace: birthPlace,
                    nationality: nationality,
                    religion: religion,
                    domicile: domicile,
                    fatherDomicile: fatherDomicile,
                    occupation: occupation,
                    fatherMobile: fatherMobile,
                    fatherCnic: fatherCnic,
                    motherCnic: motherCnic,
                    address: address
                },
                educationalInformation: {
                    ninthRoll: ninthRoll,
                    ninthYear: ninthYear,
                    matricRoll: matricRoll,
                    matricYear: matricYear,
                    province: province,
                    board: board,
                    studyGroup: studyGroup,
                    subject: subject,
                    totalMarks: totalMarks,
                    obtainedMarks: obtainedMarks,
                    scaledTotal: scaledTotal,
                    scaledObtained: scaledObtained,
                    class8Passing: class8Passing,
                    class8School: class8School,
                    class5Passing: class5Passing,
                    class5School: class5School
                }
            }).then(() => {
                alert("Admission Form submitted successfully!");
                window.location.href = "../Home/Portal-Home.html";  // Redirect after submission
            })
                .catch((error) => {
                    alert('Error: ' + error);
                });
        }
    });

        // Function to save form data as PDF
        function saveAsPDF() {
            const element = document.querySelector(".container");
            const opt = {
                margin: 1,
                filename: 'student_form.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().from(element).set(opt).save();
        }
    </script>

    <!-- Include html2pdf.js library for saving as PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

</body>

</html>